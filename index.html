<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parental Control App</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
:root {
  --primary:#4a90e2;
  --secondary:#50e3c2;
  --bg:#f4f7fa;
  --card-bg:#fff;
  --shadow:0 10px 25px rgba(0,0,0,0.1);
  --border-radius:12px;
  --transition:0.3s;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:var(--bg);display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:20px;}
.page{width:100%;max-width:600px;background:var(--card-bg);padding:25px;border-radius:var(--border-radius);box-shadow:var(--shadow);display:none;flex-direction:column;align-items:center;gap:15px;transition:var(--transition);}
.page.active{display:flex;}
.feature-img{width:100%;max-height:200px;border-radius:var(--border-radius);object-fit:cover;transition:var(--transition);}
h1,h2{color:var(--primary);}
ul{list-style:none;padding:0;width:100%;}
ul li{background:#f0f4ff;padding:10px 15px;border-radius:var(--border-radius);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;transition:var(--transition);}
ul li:hover{background:#e0ebff;}
button{padding:10px 20px;border:none;border-radius:var(--border-radius);background:var(--primary);color:#fff;cursor:pointer;font-weight:600;transition:var(--transition);}
button:hover{opacity:0.85;transform:translateY(-2px);}
input[type=text],input[type=password]{padding:10px 12px;border-radius:var(--border-radius);border:1px solid #ccc;width:70%;transition:var(--transition);}
input[type=text]:focus,input[type=password]:focus{outline:none;border-color:var(--primary);}
.badge{font-weight:bold;color:#fff;background:var(--primary);padding:4px 12px;border-radius:12px;text-align:center;}
label{display:flex;align-items:center;gap:10px;font-weight:500;cursor:pointer;}
#map{width:100%;height:300px;border-radius:var(--border-radius);}
.role-btns{display:flex;gap:15px;margin-top:15px;}
.remove-btn{background:red;padding:4px 8px;border-radius:8px;font-size:12px;cursor:pointer;}
.remove-btn:hover{opacity:0.8;}
@media(max-width:600px){body{padding:10px;}button,input[type=text]{width:90%;}}
</style>
</head>
<body>

<!-- Get Started -->
<div class="page active" id="startPage">
  <h1>👨‍👩‍👧 Parental Control</h1>
  <img src="parent_start.jpg" class="feature-img" alt="Get Started">
  <p>Select your role:</p>
  <div class="role-btns">
    <button onclick="chooseRole('parent')">Parent</button>
    <button onclick="chooseRole('child')">Child</button>
  </div>
</div>

<!-- Apps -->
<div class="page" id="appsPage">
  <h2>📱 Blocked Apps</h2>
  <img src="content_filter.jpg" class="feature-img" alt="Blocked Apps">
  <ul id="blockedAppsList"></ul>
  <div class="parentOnly">
    <input type="text" id="newAppInput" placeholder="Add app">
    <button onclick="addItem('blockedAppsList','newAppInput')">Add</button>
  </div>
  <button onclick="nextPage('websitesPage')">Next ➡️</button>
</div>

<!-- Websites -->
<div class="page" id="websitesPage">
  <h2>🌐 Blocked Websites</h2>
  <img src="Parent.jpg" class="feature-img" alt="Blocked Websites">
  <ul id="blockedWebList"></ul>
  <div class="parentOnly">
    <input type="text" id="newWebInput" placeholder="Add website">
    <button onclick="addItem('blockedWebList','newWebInput')">Add</button>
  </div>
  <button onclick="nextPage('keywordsPage')">Next ➡️</button>
</div>

<!-- Keywords -->
<div class="page" id="keywordsPage">
  <h2>🔑 Blocked Keywords</h2>
  <img src="Screen.jpg" class="feature-img" alt="Blocked Keywords">
  <ul id="blockedKeywordsList"></ul>
  <div class="parentOnly">
    <input type="text" id="newKeywordInput" placeholder="Add keyword">
    <button onclick="addItem('blockedKeywordsList','newKeywordInput')">Add</button>
  </div>
  <button onclick="nextPage('cyberPage')">Next ➡️</button>
</div>

<!-- Cyber Safety -->
<div class="page" id="cyberPage">
  <h2>🛡️ Cyber Safety</h2>
  <img src="Cyberbullying.jpg" class="feature-img" alt="Cyber Safety">
  <label><input type="checkbox" id="cyberbullying"> Cyberbullying Protection</label>
  <label><input type="checkbox" id="predators"> Predator Alerts</label>
  <button onclick="nextPage('locationPage')">Next ➡️</button>
</div>

<!-- Location -->
<div class="page" id="locationPage">
  <h2>📍 Live Location</h2>
  <img src="location_page.png" class="feature-img" alt="Live Location">
  <div id="map"></div>
  <p id="gpsLocation">Fetching location...</p>
  <button onclick="goAfterLocation()">Next ➡️</button>
</div>

<!-- Password (Parent only) -->
<div class="page" id="passwordPage">
  <h2>🔐 Change Password</h2>
  <img src="Password.jpg" class="feature-img" alt="Password Security">
  <input type="password" id="oldPass" placeholder="Old Password">
  <input type="password" id="newPass" placeholder="New Password">
  <input type="password" id="confirmPass" placeholder="Confirm New Password">
  <button onclick="updatePassword()">Update</button>
  <small id="passMsg"></small>
  <button onclick="nextPage('summaryPage')">Next ➡️</button>
</div>

<!-- Summary (Parent only) -->
<div class="page" id="summaryPage">
  <h2>📊 Summary</h2>
  <img src="summary_page.jpg" class="feature-img" alt="Summary Report">
  <p>Blocked Apps: <span id="summaryApps" class="badge">0</span></p>
  <p>Blocked Websites: <span id="summaryWeb" class="badge">0</span></p>
  <p>Blocked Keywords: <span id="summaryKeywords" class="badge">0</span></p>
  <p>Cyberbullying: <span id="summaryCyber" class="badge">ON</span></p>
  <p>Predator Alerts: <span id="summaryPredator" class="badge">ON</span></p>
  <button onclick="alert('✅ All Done!')">Finish</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
let isParent = false;
let savedPassword = localStorage.getItem("parentPassword") || "1234";

// Empty lists initially
let blockedApps = JSON.parse(localStorage.getItem("blockedApps")) || [];
let blockedWebsites = JSON.parse(localStorage.getItem("blockedWebsites")) || [];
let blockedKeywords = JSON.parse(localStorage.getItem("blockedKeywords")) || [];
let cyberSettings = JSON.parse(localStorage.getItem("cyberSettings")) || { cyberbullying:true, predators:true };

// Role selection
function chooseRole(role){
  if(role==="parent"){
    let pass = prompt("Enter Parent Password:");
    if(pass!==savedPassword){ alert("❌ Wrong password!"); return; }
    isParent=true;
  }
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('appsPage').classList.add('active');
  updateView();
  renderLists();
}

// Show parent-only controls
function updateView(){
  document.querySelectorAll('.parentOnly').forEach(el=>el.style.display=isParent?'flex':'none');
}

// Render lists with remove buttons for parent
function renderLists(){
  const appsUl=document.getElementById("blockedAppsList");
  const webUl=document.getElementById("blockedWebList");
  const keyUl=document.getElementById("blockedKeywordsList");
  appsUl.innerHTML=""; blockedApps.forEach((a,i)=>{ let li=document.createElement("li"); li.textContent=a; if(isParent){ let btn=document.createElement("span"); btn.textContent="Remove"; btn.className="remove-btn"; btn.onclick=()=>removeItem('apps',i); li.appendChild(btn);} appsUl.appendChild(li);});
  webUl.innerHTML=""; blockedWebsites.forEach((w,i)=>{ let li=document.createElement("li"); li.textContent=w; if(isParent){ let btn=document.createElement("span"); btn.textContent="Remove"; btn.className="remove-btn"; btn.onclick=()=>removeItem('web',i); li.appendChild(btn);} webUl.appendChild(li);});
  keyUl.innerHTML=""; blockedKeywords.forEach((k,i)=>{ let li=document.createElement("li"); li.textContent=k; if(isParent){ let btn=document.createElement("span"); btn.textContent="Remove"; btn.className="remove-btn"; btn.onclick=()=>removeItem('keywords',i); li.appendChild(btn);} keyUl.appendChild(li);});
  document.getElementById("cyberbullying").checked=cyberSettings.cyberbullying;
  document.getElementById("predators").checked=cyberSettings.predators;
  updateSummary();
}

// Remove item
function removeItem(type,index){
  if(type==='apps'){ blockedApps.splice(index,1); localStorage.setItem("blockedApps",JSON.stringify(blockedApps)); }
  if(type==='web'){ blockedWebsites.splice(index,1); localStorage.setItem("blockedWebsites",JSON.stringify(blockedWebsites)); }
  if(type==='keywords'){ blockedKeywords.splice(index,1); localStorage.setItem("blockedKeywords",JSON.stringify(blockedKeywords)); }
  renderLists();
}

// Add item
function addItem(listId,inputId){
  const input=document.getElementById(inputId); if(!input||input.value.trim()==="") return;
  const val=input.value.trim();
  if(listId==='blockedAppsList'){ blockedApps.push(val); localStorage.setItem("blockedApps",JSON.stringify(blockedApps)); }
  if(listId==='blockedWebList'){ blockedWebsites.push(val); localStorage.setItem("blockedWebsites",JSON.stringify(blockedWebsites)); }
  if(listId==='blockedKeywordsList'){ blockedKeywords.push(val); localStorage.setItem("blockedKeywords",JSON.stringify(blockedKeywords)); }
  input.value=""; renderLists();
}

// Next page
function nextPage(id){ document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(id).classList.add('active'); updateSummary(); }

// Cyber settings
document.getElementById("cyberbullying").addEventListener("change",()=>{ cyberSettings.cyberbullying=document.getElementById("cyberbullying").checked; localStorage.setItem("cyberSettings",JSON.stringify(cyberSettings)); updateSummary();});
document.getElementById("predators").addEventListener("change",()=>{ cyberSettings.predators=document.getElementById("predators").checked; localStorage.setItem("cyberSettings",JSON.stringify(cyberSettings)); updateSummary();});

// Password
function updatePassword(){
  const oldP=document.getElementById("oldPass").value;
  const newP=document.getElementById("newPass").value;
  const confirmP=document.getElementById("confirmPass").value;
  if(oldP!==savedPassword){document.getElementById("passMsg").innerText="Old password wrong!"; return;}
  if(newP!==confirmP){document.getElementById("passMsg").innerText="Passwords do not match!"; return;}
  savedPassword=newP; localStorage.setItem("parentPassword",newP); alert("✅ Password updated!");
}

// Summary
function updateSummary(){
  if(!isParent) return;
  document.getElementById("summaryApps").innerText=blockedApps.length;
  document.getElementById("summaryWeb").innerText=blockedWebsites.length;
  document.getElementById("summaryKeywords").innerText=blockedKeywords.length;
  document.getElementById("summaryCyber").innerText=cyberSettings.cyberbullying?"ON":"OFF";
  document.getElementById("summaryPredator").innerText=cyberSettings.predators?"ON":"OFF";
}

// Live GPS map
let map, marker;
function initMap(lat=0,lng=0){
  map=L.map('map').setView([lat,lng],16);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom:19 }).addTo(map);
  marker=L.marker([lat,lng]).addTo(map).bindPopup("Child Location").openPopup();
}
function updateLocation(){
  const locEl=document.getElementById("gpsLocation");
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const lat=pos.coords.latitude.toFixed(5);
      const lng=pos.coords.longitude.toFixed(5);
      locEl.innerText=`Latitude: ${lat}, Longitude: ${lng}, Accuracy: ${pos.coords.accuracy}m`;
      if(!map) initMap(lat,lng);
      else { marker.setLatLng([lat,lng]); map.setView([lat,lng],16); }
    },err=>{locEl.innerText="Location denied!";},{enableHighAccuracy:true});
  } else locEl.innerText="GPS not supported!";
}
setInterval(updateLocation,5000); updateLocation();

function goAfterLocation(){ if(isParent) nextPage('passwordPage'); else alert("✅ All Done!"); }
</script>
</body>
</html>
