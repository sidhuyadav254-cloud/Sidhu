<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Shorts Harmful Content Detector</title>
<style>
  body { font-family: "Poppins", sans-serif; background: #f4f6fa; text-align:center; padding: 30px; }
  input { width: 70%; padding: 10px; font-size:16px; border-radius:8px; border:1px solid #ccc; }
  button { padding: 10px 20px; margin-left:10px; border:none; border-radius:8px; background:#4c6ef5; color:white; cursor:pointer; font-size:16px; }
  video { width: 80%; max-width:700px; margin-top:20px; border-radius:12px; }
  #video-info { margin-top:15px; background:white; padding:15px; border-radius:12px; display:inline-block; box-shadow:0 3px 10px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<h2>ðŸŽ¬ YouTube Shorts Harmful Content Detector</h2>

<input type="text" id="youtubeUrl" placeholder="Paste YouTube Shorts URL here" />
<button onclick="analyzeVideo()">Analyze & Play</button>

<video id="videoPlayer" controls autoplay></video>

<div id="video-info">
  <p><strong>Harmful Content:</strong> <span id="harmful">--%</span></p>
  <p><strong>Recommended Age:</strong> <span id="age">--</span></p>
</div>

<script>
async function analyzeVideo() {
  const url = document.getElementById("youtubeUrl").value.trim();
  if (!url) { alert("Please enter a YouTube URL"); return; }

  const response = await fetch("http://127.0.0.1:5000/analyze", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ url })
  });

  const data = await response.json();

  if (data.error) {
    alert(data.error);
    return;
  }

  // Update harmful % and age
  document.getElementById("harmful").innerText = data.harmful_percentage + "%";
  document.getElementById("age").innerText = data.age_limit;

  // Play the video from backend
  const video = document.getElementById("videoPlayer");
  video.src = data.video_url + "?t=" + new Date().getTime();
  video.load();
  video.play();
}
</script>

</body>
</html>
