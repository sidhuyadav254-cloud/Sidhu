<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Video Harmful Content Analyzer</title>
<style>
  body {font-family:Poppins, sans-serif; text-align:center; background:#f7f8fc;}
  h1 {color:#333;}
  .container {max-width:600px; margin:auto; background:#fff; padding:20px; border-radius:15px; box-shadow:0 0 10px #ccc;}
  input, button {padding:10px; width:90%; margin:10px;}
  iframe {width:100%; height:300px; border-radius:10px;}
  .result {margin-top:20px; font-size:18px;}
</style>
</head>
<body>
<div class="container">
  <h1>ðŸŽ¬ Video Harmful Content Analyzer</h1>
  <input type="text" id="videoUrl" placeholder="Enter YouTube video URL">
  <button onclick="analyzeVideo()">Analyze</button>

  <div id="videoPlayer"></div>

  <div class="result" id="result"></div>
</div>

<script>
function analyzeVideo() {
  const url = document.getElementById("videoUrl").value;
  if(!url) { alert("Enter a YouTube URL!"); return; }

  // Extract video ID from URL
  const videoId = url.split("v=")[1]?.split("&")[0] || url.split("/shorts/")[1];
  document.getElementById("videoPlayer").innerHTML =
    `<iframe src="https://www.youtube.com/embed/${videoId}" allowfullscreen></iframe>`;

  // Send to backend
  fetch("http://127.0.0.1:5000/analyze", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ video_url: url })
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("result").innerHTML = `
      <p><strong>Harmful Content:</strong> ${data.harmful_percent}%</p>
      <p><strong>Age Limit:</strong> ${data.age_limit}</p>
      <p><strong>Message:</strong> ${data.message}</p>
    `;
  })
  .catch(err => {
    document.getElementById("result").innerHTML = "Error analyzing video.";
  });
}
</script>
</body>
</html>
